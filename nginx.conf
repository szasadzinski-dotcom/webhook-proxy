
server {
  listen 80;
  server_name _;

  # Nur ein Endpoint: /submit
  location = /submit {
    if ($request_method != POST) { return 405; }

    # Optional: Header (kannst du später in n8n prüfen)
    proxy_set_header X-Proxy-Secret "CHANGE_ME_LONG_RANDOM";

    proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
    proxy_set_header X-Forwarded-Proto $scheme;

    proxy_pass https://n8n.zasadzinski.de/webhook/unterrichtsausfal;
  }

  # Alles andere sperren
  location / { return 404; }
}
